(()=>{"use strict";const e=document.querySelector(".starting-screen-btn"),t=document.querySelector(".results-game-sett"),s=document.querySelector(".quiz-container"),n=document.querySelector(".results-try"),r=[{percent:100,animationURL:"https://lottie.host/08d62682-bb79-4a74-9af2-0c08e0377014/LuqT0MHFWZ.lottie",resultMessage:"Perfect! You nailed it!"},{percent:[80,99],animationURL:"https://lottie.host/ec521fe6-a670-430f-b353-ef7dd1497234/VJDxw8T9zC.lottie",resultMessage:"Great job! Almost perfect."},{percent:[70,79],animationURL:"https://lottie.host/2362007e-69d7-4a9b-af97-1a8f1f08fb4e/u9Gn5iSJIk.lottie",resultMessage:"Nice! You're getting there."},{percent:[50,69],animationURL:"https://lottie.host/90441000-f0e8-4e4d-9aac-0b9355361fe7/AdhbHfcThW.lottie",resultMessage:"Not bad. Keep going!"},{percent:[30,49],animationURL:"https://lottie.host/f3109c7a-32ab-4a63-b819-6adb196880a9/4grDEIOszk.lottie",resultMessage:"Tough round. Try again!"},{percent:[0,29],animationURL:"https://lottie.host/839e8626-ce27-4d2a-aa28-936dd276ce91/A9t78Yn2mr.lottie",resultMessage:"Donâ€™t give up! Practice makes perfect."}];t.addEventListener("click",()=>{s.classList.remove("show-results"),s.classList.add("show-game-settings")}),n.addEventListener("click",()=>{E(),s.classList.remove("show-results"),s.classList.add("show-quiz-content"),x()});const o=new Audio("../sounds/clickSound.mp3"),c=new Audio("../sounds/correctAnswer.mp3"),a=new Audio("../sounds/wrongSound.mp3"),i=e=>{const t=e.target.classList.contains("main-button"),s=e.target.classList.contains("num-questions-btn"),n=e.target.classList.contains("question-modal-exit"),r=e.target.dataset.correct;t||s||n?t&&r?c.play():t&&!r&&a.play():(c.pause(),c.currentTime=0,a.pause(),a.currentTime=0,o.play())};document.querySelectorAll("button").forEach(e=>{e.addEventListener("click",i)});const u=a,l=document.querySelector(".aside-next"),d=document.querySelectorAll(".main-button"),m=document.querySelector(".question-modal-exit");let q,y,h=0,f=0;const L=()=>{(()=>{const e=[...d].find(e=>"true"===e.dataset.correct);e&&e.removeAttribute("data-correct")})(),g(),S(),l.setAttribute("disabled","");const e=q[h];var t;t=(e=>{const t=Math.floor(4*Math.random());(e=>{const t=document.querySelectorAll(".main-button");t[e]&&(t[e].dataset.correct="true")})(t);const s=e.correct_answer,n=[...e.incorrect_answers];return n.splice(t,0,s),n})(e),document.querySelectorAll(".main-button").forEach((e,s)=>{e.innerHTML=t[s]});var s;(e=>{const t=document.querySelector(".main-question"),s=(e=>{const t=document.createElement("textarea");return t.innerHTML=e,t.value})(e),n=s.length,r=document.querySelector(".complete-question"),o=document.createElement("span");if(window.screen.width<736)if(n>85){let e=s.substring(0,80);e+="... ",t.innerHTML=e,o.textContent="Read More",o.classList.add("read-more"),t.appendChild(o),r.innerHTML=s,o.addEventListener("click",A)}else t.innerHTML=s;else t.innerHTML=s})(e.question),h++,s=h,document.querySelector(".aside-curr-question").textContent=s},b=e=>{document.querySelector(".current-time").textContent=e},p=()=>{let e=10;b(e);const t=setInterval(()=>{e--,b(e),e<=0&&(clearInterval(t),l.removeAttribute("disabled"),d.forEach(e=>{e.dataset.correct?e.classList.add("correct"):e.classList.add("wrong")}),v(),u.play())},1e3);return t},g=()=>{d.forEach(e=>{e.classList.remove("correct","wrong")})},S=()=>{d.forEach(e=>{e.removeAttribute("disabled")})},v=()=>{d.forEach(e=>{e.setAttribute("disabled","")})},w=()=>{document.querySelector(".correct-answer-count").textContent=f},E=()=>{h=0},A=()=>{document.querySelector("body").classList.add("show-modal")},x=()=>{var e,t;f=0,e=q[0].category,document.querySelector(".header-category").textContent=e,t=q.length,document.querySelectorAll(".num-question").forEach(e=>{e.textContent=t}),w(),L(),y=p()};d.forEach(e=>{e.addEventListener("click",e=>{(e=>{const t=e.target;t.dataset.correct?(t.classList.add("correct"),f++,w()):(t.classList.add("wrong"),[...d].find(e=>"true"===e.dataset.correct).classList.add("correct"))})(e),clearInterval(y),l.removeAttribute("disabled"),v()})}),l.addEventListener("click",()=>{h+1===q.length&&(l.textContent="See Results"),h+1<=q.length?(L(),y=p()):(((e,t)=>{s.classList.add("show-results"),s.classList.remove("show-quiz-content");const n=document.querySelector(".results-num-corr"),o=document.querySelector(".results-num-ques");n.textContent=e,o.textContent=t,((e,t)=>{const s=document.querySelector(".quiz-results-p1"),n=document.querySelector("#result-animation"),o=e/t*100,c=r.find(e=>{if("number"==typeof e.percent){if(e.percent===o)return!0}else{const[t,s]=e.percent;if(o>=t&&o<=s)return!0}return!1});s.textContent=c.resultMessage,n.load(c.animationURL)})(e,t)})(f,h),l.textContent="Next")}),m.addEventListener("click",()=>{document.querySelector("body").classList.remove("show-modal")});const k=document.querySelector(".form"),M=document.querySelectorAll(".difficulty-label"),T=document.querySelector(".num-questions-input");let C=50,z=!0;const R=()=>{document.querySelector("#decrease-btn").setAttribute("disabled","")},H=()=>{document.querySelector("#increase-btn").setAttribute("disabled","")},I=()=>{document.querySelector("#increase-btn").removeAttribute("disabled")},U=()=>{document.querySelector("#decrease-btn").removeAttribute("disabled")},j=async e=>{const t=document.querySelector(".category-select"),s=t.options[t.selectedIndex].value,n=await(async e=>(await fetch("/numberQuestions/"+e,{method:"GET"})).json())(s),r=n[Object.keys(n).find(t=>t.split("_")[1]===e)];r>=50?C=50:r<50&&(C=r),document.querySelector("#num-ques-max").textContent=C};e.addEventListener("click",()=>{const e=document.querySelector(".quiz-container");(e=>{e.classList.toggle("hide-start-screen")})(e),(e=>{e.classList.toggle("show-game-settings")})(e)}),k.addEventListener("submit",async e=>{if(e.preventDefault(),(()=>{const e=[...document.querySelectorAll(".difficulty-label")].find(e=>e.classList.contains("selected")&&e.children[0].checked),t=document.querySelector(".difficulty-upper-container");return!!e||(t.classList.add("show-diff-error"),!1)})()&&z){const e=new FormData(k),t=Object.fromEntries(e.entries()),s=await(async e=>{let t;try{const s=await fetch("/questions",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});t=await s.json()}catch(e){console.log(e)}return t})(t);(()=>{const e=document.querySelectorAll(".difficulty-label"),t=document.querySelector(".num-questions-input"),s=document.querySelector(".category-select"),n=[...e].find(e=>e.classList.contains("selected"));n&&(n.classList.remove("selected"),n.querySelector("input").checked=!1),t.value=5,s.value=9})(),document.querySelector(".difficulty-upper-container").classList.remove("show-diff-error"),q=void 0,h=0,(e=>{q=e})(s),x();const n=document.querySelector(".quiz-container");(e=>{e.classList.remove("show-game-settings")})(n),(e=>{e.classList.toggle("show-quiz-content")})(n)}}),M.forEach(e=>{const t=e.querySelector("input");t.addEventListener("change",()=>{M.forEach(e=>e.classList.remove("selected")),t.checked&&e.classList.add("selected")})}),R(),T.addEventListener("input",e=>{const t=parseInt(e.target.value),s=document.querySelector(".num-ques-upper");U(),I(),t>=5&&t<=C?(s.classList.remove("show-num-ques-error"),5===t?R():t===C?H():(U(),I()),z=!0):(s.classList.add("show-num-ques-error"),t>C?H():R(),z=!1)}),(()=>{const e=document.querySelectorAll(".num-questions-btn"),t=document.querySelector("#num-questions-input"),s=document.querySelector(".num-ques-upper");e.forEach(e=>{e.addEventListener("click",()=>{s.classList.remove("show-num-ques-error");let n=Number(t.value);"decrease-btn"===e.id&&n>5?n-=1:"increase-btn"===e.id&&n<C&&(n+=1),t.value=n,n<=5?(R(),n<5&&(s.classList.add("show-num-ques-error"),z=!1)):(U(),z=!0),n>=C?(H(),n>C&&(s.classList.add("show-num-ques-error"),z=!1)):(I(),z=!0)})})})(),k.addEventListener("change",e=>{if(e.target.classList.contains("difficulty-input")){const t=e.target.value;j(t)}else if(e.target.classList.contains("category-select")){const e=[...M].find(e=>e.classList.contains("selected"));if(e){const t=e.querySelector("input").value;j(t)}}})})();